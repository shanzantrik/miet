(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{58195:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(3762)}])},35358:function(e,t,s){"use strict";var n=s(85893),a=s(67294),i=s(11163),r=s(41664),c=s.n(r),l=s(34679),o=s(37069),d=s(46063),x=s(36886),h=s(63998),j=s(74775),u=s(72865),m=s(20426),Z=s(78121),g=s(29330),p=s(53165);const v=[{text:"Dashboard",href:"/admin",icon:(0,n.jsx)(l.Z,{})},{text:"Users",href:"/admin/users",icon:(0,n.jsx)(o.Z,{})},{text:"Consultants",href:"/admin/consultants",icon:(0,n.jsx)(d.Z,{})},{text:"Products",href:"/admin/products",icon:(0,n.jsx)(x.Z,{})},{text:"Categories",href:"/admin/categories",icon:(0,n.jsx)(j.Z,{})},{text:"Ailments",href:"/admin/ailments",icon:(0,n.jsx)(u.Z,{})},{text:"Specializations",href:"/admin/specializations",icon:(0,n.jsx)(g.Z,{})},{text:"Orders",href:"/admin/orders",icon:(0,n.jsx)(h.Z,{})},{text:"Reviews",href:"/admin/reviews",icon:(0,n.jsx)(p.Z,{})},{text:"Settings",href:"/admin/settings",icon:(0,n.jsx)(m.Z,{})}];t.Z=function(e){let{children:t}=e;const s=(0,i.useRouter)(),[r,l]=(0,a.useState)(!0);return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,n.jsxs)("div",{className:"".concat(r?"w-64":"w-20"," bg-white shadow-lg transition-all duration-300"),children:[(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("h1",{className:"text-xl font-bold ".concat(!r&&"hidden"),children:"Admin Panel"})}),(0,n.jsxs)("nav",{className:"mt-4",children:[v.map((e=>(0,n.jsxs)(c(),{href:e.href,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ".concat(s.pathname===e.href?"bg-gray-100":""),children:[e.icon,r&&(0,n.jsx)("span",{className:"ml-4",children:e.text})]},e.href))),(0,n.jsxs)("button",{onClick:()=>{s.push("/login")},className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[(0,n.jsx)(Z.Z,{}),r&&(0,n.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm",children:(0,n.jsx)("div",{className:"px-4 py-3",children:(0,n.jsx)("button",{onClick:()=>l(!r),className:"text-gray-500 hover:text-gray-700",children:r?"\u2190":"\u2192"})})}),(0,n.jsx)("main",{className:"p-6",children:t})]})]})}},3762:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var n=s(85893),a=s(78047),i=s(35358),r=s(67294),c=s(54937),l=s(50800),o=s(77046),d=s(41102),x=s(41266),h=s(32546),j=s(94659),u=s(9209),m=s(43013),Z=s(36526),g=s(9258),p=s(75298),v=s(27965),f=s(11163),y=s(97016),w=s(87066);var b=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),i=(0,f.useRouter)(),{token:b}=(0,y.a)();(0,r.useEffect)((()=>{N()}),[]);const N=async()=>{try{const e=await w.Z.get("".concat("https://miet-backend-five.vercel.app","/reviews?limit=5&sort=createdAt:desc"),{headers:{Authorization:"Bearer ".concat(b)}});t(e.data)}catch(e){console.error("Error fetching recent reviews:",e)}finally{a(!1)}};return s?(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{children:(0,n.jsx)(o.Z,{children:"Loading recent reviews..."})})}):(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{title:"Recent Reviews",action:(0,n.jsx)(x.Z,{onClick:()=>i.push("/admin/reviews"),children:"View All"})}),(0,n.jsx)(l.Z,{children:(0,n.jsxs)(h.Z,{children:[e.map((e=>(0,n.jsxs)(j.ZP,{button:!0,onClick:()=>(e=>{e.consultantId?i.push("/admin/consultants/".concat(e.consultantId,"/reviews")):e.productId&&i.push("/admin/products/".concat(e.productId,"/reviews"))})(e),sx:{mb:1},children:[(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{children:e.user.name[0]})}),(0,n.jsx)(Z.Z,{primary:(0,n.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(o.Z,{variant:"subtitle2",children:e.user.name}),(0,n.jsx)(p.Z,{size:"small",label:e.consultantId?"Consultant":"Product",color:e.consultantId?"primary":"secondary"})]}),secondary:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{value:e.rating,readOnly:!0,size:"small"}),(0,n.jsx)(o.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.comment}),(0,n.jsx)(o.Z,{variant:"caption",color:"text.secondary",children:new Date(e.createdAt).toLocaleDateString()})]})})]},e.id))),0===e.length&&(0,n.jsx)(j.ZP,{children:(0,n.jsx)(Z.Z,{primary:"No reviews yet",secondary:"Reviews will appear here when users start rating"})})]})})]})},N=s(53020),R=s(29009),k=s(98687),C=s(14195),_=s(3023),D=s(75358),A=s(26050),E=s(33558),P=s(56880),S=s(94831),I=s(30483);var K=()=>{const[e,t]=(0,r.useState)({monthlyRatings:[],ratingDistribution:[],totalReviews:0,averageRating:0}),[s,i]=(0,r.useState)(!0),{token:x}=(0,y.a)();(0,r.useEffect)((()=>{h()}),[]);const h=async()=>{try{const e=await w.Z.get("".concat("https://miet-backend-five.vercel.app","/reviews/analytics"),{headers:{Authorization:"Bearer ".concat(x)}});t(e.data)}catch(e){console.error("Error fetching review analytics:",e)}finally{i(!1)}};return s?(0,n.jsx)(g.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:(0,n.jsx)(N.Z,{})}):(0,n.jsxs)(a.Z,{container:!0,spacing:3,children:[(0,n.jsx)(a.Z,{item:!0,xs:12,md:6,children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{title:"Monthly Average Ratings"}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(g.Z,{sx:{height:300},children:(0,n.jsx)(R.h,{width:"100%",height:"100%",children:(0,n.jsxs)(k.w,{data:e.monthlyRatings,children:[(0,n.jsx)(C.q,{strokeDasharray:"3 3"}),(0,n.jsx)(_.K,{dataKey:"month"}),(0,n.jsx)(D.B,{domain:[0,5]}),(0,n.jsx)(A.u,{}),(0,n.jsx)(E.D,{}),(0,n.jsx)(P.x,{type:"monotone",dataKey:"consultantRating",name:"Consultants",stroke:"#8884d8"}),(0,n.jsx)(P.x,{type:"monotone",dataKey:"productRating",name:"Products",stroke:"#82ca9d"})]})})})})]})}),(0,n.jsx)(a.Z,{item:!0,xs:12,md:6,children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{title:"Rating Distribution"}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(g.Z,{sx:{height:300},children:(0,n.jsx)(R.h,{width:"100%",height:"100%",children:(0,n.jsxs)(S.v,{data:e.ratingDistribution,children:[(0,n.jsx)(C.q,{strokeDasharray:"3 3"}),(0,n.jsx)(_.K,{dataKey:"rating"}),(0,n.jsx)(D.B,{}),(0,n.jsx)(A.u,{}),(0,n.jsx)(E.D,{}),(0,n.jsx)(I.$,{dataKey:"consultantCount",name:"Consultants",fill:"#8884d8"}),(0,n.jsx)(I.$,{dataKey:"productCount",name:"Products",fill:"#82ca9d"})]})})})})]})}),(0,n.jsx)(a.Z,{item:!0,xs:12,md:6,children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(d.Z,{title:"Overall Statistics"}),(0,n.jsx)(l.Z,{children:(0,n.jsxs)(a.Z,{container:!0,spacing:2,children:[(0,n.jsxs)(a.Z,{item:!0,xs:6,children:[(0,n.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Total Reviews"}),(0,n.jsx)(o.Z,{variant:"h4",children:e.totalReviews})]}),(0,n.jsxs)(a.Z,{item:!0,xs:6,children:[(0,n.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Average Rating"}),(0,n.jsx)(o.Z,{variant:"h4",children:e.averageRating.toFixed(1)})]})]})})]})})]})},z=s(84644),B=s(39044);const O=()=>(0,n.jsx)(i.Z,{children:(0,n.jsxs)(a.Z,{container:!0,spacing:3,children:[(0,n.jsx)(a.Z,{item:!0,xs:12,children:(0,n.jsx)(K,{})}),(0,n.jsx)(a.Z,{item:!0,xs:12,md:6,children:(0,n.jsx)(b,{})})]})});function F(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{}),(0,n.jsx)(O,{}),(0,n.jsx)(B.Z,{})]})}}},function(e){e.O(0,[3424,7558,7965,8047,8446,1627,2344,5647,9774,2888,179],(function(){return t=58195,e(e.s=t);var t}));var t=e.O();_N_E=t}]);