(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1249],{23914:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories/[id]",function(){return t(32132)}])},66308:function(e,s,t){"use strict";t.d(s,{Z:function(){return j}});var r=t(85893),a=t(67294),n=t(11163),i=t(41664),o=t.n(i),l=t(42237),c=t(7543),d=t(18274),m=t(78357),u=t(21809),x=t(50063),h=t(70303),g=t(13658),f=t(45548),p=t(31415),y=t(43407);const b=[{name:"Dashboard",href:"/admin",icon:l.Z},{name:"Users",href:"/admin/users",icon:c.Z},{name:"Products",href:"/admin/products",icon:d.Z},{name:"Consultants",href:"/admin/consultants",icon:m.Z},{name:"Categories",href:"/admin/categories",icon:u.Z},{name:"Ailments",href:"/admin/ailments",icon:x.Z},{name:"Specializations",href:"/admin/specializations",icon:h.Z},{name:"Analytics",href:"/admin/analytics",icon:g.Z},{name:"Settings",href:"/admin/settings",icon:f.Z}];function j(e){let{children:s}=e;const[t,i]=(0,a.useState)(!1),l=(0,n.useRouter)(),c=()=>{localStorage.removeItem("token"),l.push("/admin/login")};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden ".concat(t?"":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>i(!1)}),(0,r.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,r.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>i(!1),children:[(0,r.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,r.jsx)(p.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})}),(0,r.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"})}),(0,r.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:b.map((e=>(0,r.jsxs)(o(),{href:e.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md ".concat(l.pathname===e.href?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(e.icon,{className:"mr-4 h-6 w-6 ".concat(l.pathname===e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"}),e.name]},e.name)))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsx)("button",{onClick:c,className:"flex-shrink-0 w-full group block",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Logout"})})})})})]})]}),(0,r.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"})}),(0,r.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:b.map((e=>(0,r.jsxs)(o(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(l.pathname===e.href?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-6 w-6 ".concat(l.pathname===e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"}),e.name]},e.name)))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsx)("button",{onClick:c,className:"flex-shrink-0 w-full group block",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Logout"})})})})})]})}),(0,r.jsxs)("div",{className:"md:pl-64 flex flex-col flex-1",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-white",children:(0,r.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",onClick:()=>i(!0),children:[(0,r.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,r.jsx)(y.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,r.jsx)("main",{className:"flex-1",children:s})]})]})}},57407:function(e,s,t){"use strict";t.d(s,{Z:function(){return m}});var r=t(85893),a=t(67294),n=t(84463),i=t(10050),o=t(5362),l=t(36947),c=t(82313),d=t(31415);function m(e){let{show:s,message:t,type:m="success",onClose:u}=e;const x={success:"bg-green-50 text-green-800",error:"bg-red-50 text-red-800",warning:"bg-yellow-50 text-yellow-800",info:"bg-blue-50 text-blue-800"},h={success:i.Z,error:o.Z,warning:l.Z,info:c.Z}[m]||i.Z;return(0,r.jsx)("div",{"aria-live":"assertive",className:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-50",children:(0,r.jsx)("div",{className:"w-full flex flex-col items-center space-y-4 sm:items-end",children:(0,r.jsx)(n.u,{show:s,as:a.Fragment,enter:"transform ease-out duration-300 transition",enterFrom:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterTo:"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"max-w-sm w-full ".concat(x[m]," shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"),children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(h,{className:"h-6 w-6","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:t})}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,r.jsxs)("button",{type:"button",className:"".concat(x[m]," rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),onClick:u,children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(d.Z,{className:"h-5 w-5","aria-hidden":"true"})]})})]})})})})})})}},65858:function(e,s,t){"use strict";t.d(s,{Q:function(){return i}});var r=t(85893),a=t(67294),n=t(11163);function i(e){return function(s){const t=(0,n.useRouter)();return(0,a.useEffect)((()=>{localStorage.getItem("token")||t.push("/admin/login")}),[t]),(0,r.jsx)(e,{...s})}}},32132:function(e,s,t){"use strict";t.r(s);var r=t(85893),a=t(67294),n=t(11163),i=t(82175),o=t(16310),l=t(66308),c=t(57407),d=t(65858);const m=o.Ry({name:o.Z_().required("Name is required"),slug:o.Z_().required("Slug is required"),description:o.Z_(),parentId:o.Z_(),status:o.Z_().oneOf(["active","inactive"]).required("Status is required"),image:o.nK()});s.default=(0,d.Q)((function(){const e=(0,n.useRouter)(),{id:s}=e.query,t=Boolean(s),[o,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)([]),[f,p]=(0,a.useState)(null),[y,b]=(0,a.useState)({show:!1,message:"",type:"success"}),j=(0,i.TA)({initialValues:{name:"",slug:"",description:"",parentId:"",status:"active",image:null},validationSchema:m,onSubmit:async function(r){x(!0);try{const a=new FormData;Object.keys(r).forEach((e=>{null!==r[e]&&""!==r[e]&&a.append(e,r[e])}));if(!(await fetch("http://localhost:5001/api/admin/categories".concat(t?"/".concat(s):""),{method:t?"PUT":"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a})).ok)throw new Error("Failed to ".concat(t?"update":"create"," category"));w("Category ".concat(t?"updated":"created"," successfully")),e.push("/admin/categories")}catch(a){console.error("Error ".concat(t?"updating":"creating"," category:"),a),w("Failed to ".concat(t?"update":"create"," category"),"error")}finally{x(!1)}}});(0,a.useEffect)((()=>{t&&v(),N()}),[t,s]);const v=async()=>{try{var e;const t=await fetch("http://localhost:5001/api/admin/categories/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw new Error("Failed to fetch category");const r=await t.json();j.setValues({name:r.name,slug:r.slug,description:r.description||"",parentId:(null===(e=r.parent)||void 0===e?void 0:e.id)||"",status:r.status,image:null}),p(r.image)}catch(t){console.error("Error fetching category:",t),w("Failed to fetch category","error")}finally{d(!1)}},N=async()=>{try{const e=await fetch("http://localhost:5001/api/admin/categories",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw new Error("Failed to fetch categories");const r=await e.json(),a=t?r.filter((e=>{var t;return e.id!==s&&!(null===(t=e.parent)||void 0===t?void 0:t.id)===s})):r;g(a)}catch(e){console.error("Error fetching categories:",e),w("Failed to fetch categories","error")}},w=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";b({show:!0,message:e,type:s})};return o?(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:t?"Edit Category":"Add New Category"}),(0,r.jsxs)("form",{onSubmit:j.handleSubmit,className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,r.jsx)("input",{type:"text",id:"name",...j.getFieldProps("name"),className:"flex-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const e=j.values.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");j.setFieldValue("slug",e)},className:"ml-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Generate Slug"})]}),j.touched.name&&j.errors.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.errors.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug"}),(0,r.jsx)("input",{type:"text",id:"slug",...j.getFieldProps("slug"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),j.touched.slug&&j.errors.slug&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.errors.slug})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"parentId",className:"block text-sm font-medium text-gray-700",children:"Parent Category"}),(0,r.jsxs)("select",{id:"parentId",...j.getFieldProps("parentId"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"None"}),h.map((e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,r.jsxs)("select",{id:"status",...j.getFieldProps("status"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]}),j.touched.status&&j.errors.status&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.errors.status})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"description",rows:4,...j.getFieldProps("description"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category Image"}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-32 w-32 flex-shrink-0",children:(0,r.jsx)("img",{src:f||"/placeholder.png",alt:"Category",className:"h-32 w-32 object-cover rounded-lg"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){j.setFieldValue("image",s);const e=new FileReader;e.onloadend=()=>{p(e.result)},e.readAsDataURL(s)}},className:"hidden"}),"Change Image"]}),j.touched.image&&j.errors.image&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.errors.image})]})]})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/admin/categories"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Category"})]})]})]}),(0,r.jsx)(c.Z,{show:y.show,message:y.message,type:y.type,onClose:()=>b((e=>({...e,show:!1})))})]})})}))}},function(e){e.O(0,[3424,6920,7023,9774,2888,179],(function(){return s=23914,e(e.s=s);var s}));var s=e.O();_N_E=s}]);