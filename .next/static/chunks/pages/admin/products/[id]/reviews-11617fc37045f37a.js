(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9009],{12573:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products/[id]/reviews",function(){return n(83213)}])},35358:function(e,t,n){"use strict";var s=n(85893),r=n(67294),i=n(11163),a=n(41664),c=n.n(a),o=n(34679),l=n(37069),d=n(46063),h=n(36886),x=n(63998),u=n(74775),m=n(72865),j=n(20426),Z=n(78121),p=n(29330),v=n(53165);const f=[{text:"Dashboard",href:"/admin",icon:(0,s.jsx)(o.Z,{})},{text:"Users",href:"/admin/users",icon:(0,s.jsx)(l.Z,{})},{text:"Consultants",href:"/admin/consultants",icon:(0,s.jsx)(d.Z,{})},{text:"Products",href:"/admin/products",icon:(0,s.jsx)(h.Z,{})},{text:"Categories",href:"/admin/categories",icon:(0,s.jsx)(u.Z,{})},{text:"Ailments",href:"/admin/ailments",icon:(0,s.jsx)(m.Z,{})},{text:"Specializations",href:"/admin/specializations",icon:(0,s.jsx)(p.Z,{})},{text:"Orders",href:"/admin/orders",icon:(0,s.jsx)(x.Z,{})},{text:"Reviews",href:"/admin/reviews",icon:(0,s.jsx)(v.Z,{})},{text:"Settings",href:"/admin/settings",icon:(0,s.jsx)(j.Z,{})}];t.Z=function(e){let{children:t}=e;const n=(0,i.useRouter)(),[a,o]=(0,r.useState)(!0);return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsxs)("div",{className:"".concat(a?"w-64":"w-20"," bg-white shadow-lg transition-all duration-300"),children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("h1",{className:"text-xl font-bold ".concat(!a&&"hidden"),children:"Admin Panel"})}),(0,s.jsxs)("nav",{className:"mt-4",children:[f.map((e=>(0,s.jsxs)(c(),{href:e.href,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ".concat(n.pathname===e.href?"bg-gray-100":""),children:[e.icon,a&&(0,s.jsx)("span",{className:"ml-4",children:e.text})]},e.href))),(0,s.jsxs)("button",{onClick:()=>{n.push("/login")},className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[(0,s.jsx)(Z.Z,{}),a&&(0,s.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsx)("button",{onClick:()=>o(!a),className:"text-gray-500 hover:text-gray-700",children:a?"\u2190":"\u2192"})})}),(0,s.jsx)("main",{className:"p-6",children:t})]})]})}},83213:function(e,t,n){"use strict";n.r(t);var s=n(85893),r=n(67294),i=n(11163),a=n(76452),c=n(77046),o=n(9258),l=n(32467),d=n(27965),h=n(54937),x=n(78716),u=n(88186),m=n(20095),j=n(3432),Z=n(95288),p=n(95865),v=n(41266),f=n(94881),g=n(61722),w=n(84697),y=n(11395),b=n(80199),k=n(96647),N=n(86866),C=n(21959),_=n(35358),S=n(97016),A=n(87066);t.default=()=>{var e;const t=(0,i.useRouter)(),{id:n}=t.query,{token:P}=(0,S.a)(),[B,R]=(0,r.useState)(null),[z,E]=(0,r.useState)([]),[O,L]=(0,r.useState)(!0),[D,F]=(0,r.useState)(null),[I,T]=(0,r.useState)(!1),[U,H]=(0,r.useState)(null),[W,X]=(0,r.useState)({rating:0,comment:""});(0,r.useEffect)((()=>{n&&q()}),[n]);const q=async()=>{try{L(!0);const[e,t]=await Promise.all([A.Z.get("".concat("https://miet-backend-five.vercel.app","/products/").concat(n),{headers:{Authorization:"Bearer ".concat(P)}}),A.Z.get("".concat("https://miet-backend-five.vercel.app","/reviews?productId=").concat(n),{headers:{Authorization:"Bearer ".concat(P)}})]);R(e.data),E(t.data),F(null)}catch(e){F("Failed to fetch product data"),console.error(e)}finally{L(!1)}};return O?(0,s.jsx)(_.Z,{children:(0,s.jsx)(a.Z,{children:(0,s.jsx)(c.Z,{children:"Loading..."})})}):D?(0,s.jsx)(_.Z,{children:(0,s.jsx)(a.Z,{children:(0,s.jsx)(c.Z,{color:"error",children:D})})}):(0,s.jsx)(_.Z,{children:(0,s.jsxs)(a.Z,{maxWidth:"lg",children:[(0,s.jsxs)(o.Z,{sx:{mb:4},children:[(0,s.jsx)(l.Z,{startIcon:(0,s.jsx)(k.Z,{}),onClick:()=>t.back(),sx:{mb:2},children:"Back to Products"}),(0,s.jsxs)(c.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Reviews for ",null===B||void 0===B?void 0:B.name]}),(0,s.jsxs)(o.Z,{sx:{mb:3},children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"Overall Rating"}),(0,s.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,s.jsx)(d.Z,{value:(null===B||void 0===B?void 0:B.rating)||0,readOnly:!0,precision:.5}),(0,s.jsxs)(c.Z,{children:[(null===B||void 0===B||null===(e=B.rating)||void 0===e?void 0:e.toFixed(1))||0," (",null===B||void 0===B?void 0:B.totalRatings," reviews)"]})]})]}),(0,s.jsx)(h.Z,{children:(0,s.jsx)(x.Z,{children:(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(m.Z,{children:(0,s.jsxs)(j.Z,{children:[(0,s.jsx)(Z.Z,{children:"User"}),(0,s.jsx)(Z.Z,{children:"Rating"}),(0,s.jsx)(Z.Z,{children:"Comment"}),(0,s.jsx)(Z.Z,{children:"Date"}),(0,s.jsx)(Z.Z,{children:"Actions"})]})}),(0,s.jsx)(p.Z,{children:z.map((e=>(0,s.jsxs)(j.Z,{children:[(0,s.jsx)(Z.Z,{children:e.user.name}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(d.Z,{value:e.rating,readOnly:!0})}),(0,s.jsx)(Z.Z,{children:e.comment}),(0,s.jsx)(Z.Z,{children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(v.Z,{color:"primary",onClick:()=>(e=>{H(e),X({rating:e.rating,comment:e.comment||""}),T(!0)})(e),children:(0,s.jsx)(N.Z,{})}),(0,s.jsx)(v.Z,{color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this review?"))try{await A.Z.delete("".concat("https://miet-backend-five.vercel.app","/reviews/").concat(e),{headers:{Authorization:"Bearer ".concat(P)}}),q()}catch(t){F("Failed to delete review"),console.error(t)}})(e.id),children:(0,s.jsx)(C.Z,{})})]})]},e.id)))})]})})})]}),(0,s.jsxs)(f.Z,{open:I,onClose:()=>T(!1),children:[(0,s.jsx)(g.Z,{children:"Edit Review"}),(0,s.jsx)(w.Z,{children:(0,s.jsxs)(o.Z,{sx:{mt:2},children:[(0,s.jsx)(d.Z,{value:W.rating,onChange:(e,t)=>{X({...W,rating:t})}}),(0,s.jsx)(y.Z,{fullWidth:!0,multiline:!0,rows:4,label:"Comment",value:W.comment,onChange:e=>X({...W,comment:e.target.value}),sx:{mt:2}})]})}),(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(l.Z,{onClick:()=>T(!1),children:"Cancel"}),(0,s.jsx)(l.Z,{onClick:async()=>{try{await A.Z.patch("".concat("https://miet-backend-five.vercel.app","/reviews/").concat(U.id),W,{headers:{Authorization:"Bearer ".concat(P)}}),T(!1),q()}catch(e){F("Failed to update review"),console.error(e)}},variant:"contained",children:"Update"})]})]})]})})}},96647:function(e,t,n){"use strict";var s=n(60588),r=n(85893);t.Z=(0,s.Z)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},40679:function(e,t,n){"use strict";const s=(0,n(47531).ZP)();t.Z=s},34286:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(67081);var r=n(40422);function i({props:e,name:t,defaultTheme:n,themeId:i}){let a=(0,r.Z)(n);return i&&(a=a[i]||a),function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,s.Z)(t.components[n].defaultProps,r):r}({theme:a,name:t,props:e})}}},function(e){e.O(0,[3424,7558,2558,7965,9728,4228,9366,9774,2888,179],(function(){return t=12573,e(e.s=t);var t}));var t=e.O();_N_E=t}]);