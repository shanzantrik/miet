(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4451],{54686:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/reviews",function(){return a(17583)}])},35358:function(e,t,a){"use strict";var n=a(85893),r=a(67294),s=a(11163),i=a(41664),o=a.n(i),c=a(34679),l=a(37069),d=a(46063),u=a(36886),h=a(63998),p=a(74775),m=a(72865),x=a(20426),v=a(78121),Z=a(29330),g=a(53165);const j=[{text:"Dashboard",href:"/admin",icon:(0,n.jsx)(c.Z,{})},{text:"Users",href:"/admin/users",icon:(0,n.jsx)(l.Z,{})},{text:"Consultants",href:"/admin/consultants",icon:(0,n.jsx)(d.Z,{})},{text:"Products",href:"/admin/products",icon:(0,n.jsx)(u.Z,{})},{text:"Categories",href:"/admin/categories",icon:(0,n.jsx)(p.Z,{})},{text:"Ailments",href:"/admin/ailments",icon:(0,n.jsx)(m.Z,{})},{text:"Specializations",href:"/admin/specializations",icon:(0,n.jsx)(Z.Z,{})},{text:"Orders",href:"/admin/orders",icon:(0,n.jsx)(h.Z,{})},{text:"Reviews",href:"/admin/reviews",icon:(0,n.jsx)(g.Z,{})},{text:"Settings",href:"/admin/settings",icon:(0,n.jsx)(x.Z,{})}];t.Z=function(e){let{children:t}=e;const a=(0,s.useRouter)(),[i,c]=(0,r.useState)(!0);return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,n.jsxs)("div",{className:"".concat(i?"w-64":"w-20"," bg-white shadow-lg transition-all duration-300"),children:[(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("h1",{className:"text-xl font-bold ".concat(!i&&"hidden"),children:"Admin Panel"})}),(0,n.jsxs)("nav",{className:"mt-4",children:[j.map((e=>(0,n.jsxs)(o(),{href:e.href,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ".concat(a.pathname===e.href?"bg-gray-100":""),children:[e.icon,i&&(0,n.jsx)("span",{className:"ml-4",children:e.text})]},e.href))),(0,n.jsxs)("button",{onClick:()=>{a.push("/login")},className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[(0,n.jsx)(v.Z,{}),i&&(0,n.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm",children:(0,n.jsx)("div",{className:"px-4 py-3",children:(0,n.jsx)("button",{onClick:()=>c(!i),className:"text-gray-500 hover:text-gray-700",children:i?"\u2190":"\u2192"})})}),(0,n.jsx)("main",{className:"p-6",children:t})]})]})}},17583:function(e,t,a){"use strict";a.r(t);var n=a(85893),r=a(67294),s=a(76452),i=a(9258),o=a(77046),c=a(78047),l=a(81687),d=a(97548),u=a(59836),h=a(79118),p=a(54937),m=a(78716),x=a(88186),v=a(20095),Z=a(3432),g=a(95288),j=a(95865),f=a(27965),b=a(75298),y=a(41266),w=a(94881),C=a(61722),k=a(84697),N=a(11395),$=a(80199),S=a(32467),O=a(86866),I=a(21959),R=a(35358),M=a(97016),F=a(87066);t.default=()=>{const{token:e}=(0,M.a)(),[t,a]=(0,r.useState)([]),[_,A]=(0,r.useState)(!0),[P,B]=(0,r.useState)(null),[V,D]=(0,r.useState)("all"),[z,E]=(0,r.useState)(!1),[L,T]=(0,r.useState)(null),[G,W]=(0,r.useState)({rating:0,comment:""}),q=async()=>{try{A(!0);const t=await F.Z.get("".concat("https://miet-backend-five.vercel.app","/reviews"),{headers:{Authorization:"Bearer ".concat(e)}});a(t.data),B(null)}catch(t){B("Failed to fetch reviews"),console.error(t)}finally{A(!1)}};(0,r.useEffect)((()=>{q()}),[e]);const H=t.filter((e=>"all"===V||("consultant"===V?e.consultantId:"product"!==V||e.productId)));return(0,n.jsx)(R.Z,{children:(0,n.jsxs)(s.Z,{maxWidth:"lg",children:[(0,n.jsxs)(i.Z,{sx:{mb:4},children:[(0,n.jsx)(o.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"Reviews Management"}),(0,n.jsx)(c.Z,{container:!0,spacing:2,sx:{mb:3},children:(0,n.jsx)(c.Z,{item:!0,xs:12,sm:4,children:(0,n.jsxs)(l.Z,{fullWidth:!0,children:[(0,n.jsx)(d.Z,{children:"Filter"}),(0,n.jsxs)(u.Z,{value:V,label:"Filter",onChange:e=>D(e.target.value),children:[(0,n.jsx)(h.Z,{value:"all",children:"All Reviews"}),(0,n.jsx)(h.Z,{value:"consultant",children:"Consultant Reviews"}),(0,n.jsx)(h.Z,{value:"product",children:"Product Reviews"})]})]})})}),P&&(0,n.jsx)(o.Z,{color:"error",sx:{mb:2},children:P}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(m.Z,{children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(v.Z,{children:(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(g.Z,{children:"User"}),(0,n.jsx)(g.Z,{children:"Rating"}),(0,n.jsx)(g.Z,{children:"Comment"}),(0,n.jsx)(g.Z,{children:"Type"}),(0,n.jsx)(g.Z,{children:"Date"}),(0,n.jsx)(g.Z,{children:"Actions"})]})}),(0,n.jsx)(j.Z,{children:H.map((t=>(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(g.Z,{children:t.user.name}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(f.Z,{value:t.rating,readOnly:!0})}),(0,n.jsx)(g.Z,{children:t.comment}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(b.Z,{label:t.consultantId?"Consultant":"Product",color:t.consultantId?"primary":"secondary"})}),(0,n.jsx)(g.Z,{children:new Date(t.createdAt).toLocaleDateString()}),(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(y.Z,{color:"primary",onClick:()=>(e=>{T(e),W({rating:e.rating,comment:e.comment||""}),E(!0)})(t),children:(0,n.jsx)(O.Z,{})}),(0,n.jsx)(y.Z,{color:"error",onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this review?"))try{await F.Z.delete("".concat("https://miet-backend-five.vercel.app","/reviews/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),q()}catch(a){B("Failed to delete review"),console.error(a)}})(t.id),children:(0,n.jsx)(I.Z,{})})]})]},t.id)))})]})})})]}),(0,n.jsxs)(w.Z,{open:z,onClose:()=>E(!1),children:[(0,n.jsx)(C.Z,{children:"Edit Review"}),(0,n.jsx)(k.Z,{children:(0,n.jsxs)(i.Z,{sx:{mt:2},children:[(0,n.jsx)(f.Z,{value:G.rating,onChange:(e,t)=>{W({...G,rating:t})}}),(0,n.jsx)(N.Z,{fullWidth:!0,multiline:!0,rows:4,label:"Comment",value:G.comment,onChange:e=>W({...G,comment:e.target.value}),sx:{mt:2}})]})}),(0,n.jsxs)($.Z,{children:[(0,n.jsx)(S.Z,{onClick:()=>E(!1),children:"Cancel"}),(0,n.jsx)(S.Z,{onClick:async()=>{try{await F.Z.patch("".concat("https://miet-backend-five.vercel.app","/reviews/").concat(L.id),G,{headers:{Authorization:"Bearer ".concat(e)}}),E(!1),q()}catch(t){B("Failed to update review"),console.error(t)}},variant:"contained",children:"Update"})]})]})]})})}},70380:function(e,t,a){"use strict";a.d(t,{V:function(){return s}});var n=a(57480),r=a(1801);function s(e){return(0,r.ZP)("MuiDivider",e)}const i=(0,n.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=i},79118:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var n=a(67294),r=a(90512),s=a(49348),i=a(20291),o=a(59573),c=a(66917),l=a(99146),d=a(85048),u=a(76611),h=a(28305),p=a(64376),m=a(19609),x=a(70380),v=a(57480);var Z=(0,v.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]),g=a(92467),j=a(1801);function f(e){return(0,j.ZP)("MuiMenuItem",e)}var b=(0,v.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),y=a(85893);const w=(0,c.ZP)(h.Z,{shouldForwardProp:e=>(0,o.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,l.Z)((({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,i.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${b.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,i.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${b.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,i.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,i.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${b.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${b.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${x.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${x.Z.inset}`]:{marginLeft:52},[`& .${g.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${g.Z.inset}`]:{paddingLeft:36},[`& .${Z.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${Z.root} svg`]:{fontSize:"1.25rem"}}}]}))));var C=n.forwardRef((function(e,t){const a=(0,d.i)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:c=!1,divider:l=!1,disableGutters:h=!1,focusVisibleClassName:x,role:v="menuitem",tabIndex:Z,className:g,...j}=a,b=n.useContext(u.Z),C=n.useMemo((()=>({dense:c||b.dense||!1,disableGutters:h})),[b.dense,c,h]),k=n.useRef(null);(0,p.Z)((()=>{i&&k.current&&k.current.focus()}),[i]);const N={...a,dense:C.dense,divider:l,disableGutters:h},$=(e=>{const{disabled:t,dense:a,divider:n,disableGutters:r,selected:i,classes:o}=e,c={root:["root",a&&"dense",t&&"disabled",!r&&"gutters",n&&"divider",i&&"selected"]},l=(0,s.Z)(c,f,o);return{...o,...l}})(a),S=(0,m.Z)(k,t);let O;return a.disabled||(O=void 0!==Z?Z:-1),(0,y.jsx)(u.Z.Provider,{value:C,children:(0,y.jsx)(w,{ref:S,role:v,tabIndex:O,component:o,focusVisibleClassName:(0,r.Z)($.focusVisible,x),className:(0,r.Z)($.root,g),...j,ownerState:N,classes:$})})}))}},function(e){e.O(0,[3424,7558,2558,7965,9728,4228,8047,9366,1627,9774,2888,179],(function(){return t=54686,e(e.s=t);var t}));var t=e.O();_N_E=t}]);