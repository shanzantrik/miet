(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8209],{42678:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return o(34632)}])},34632:function(e,t,o){"use strict";o.r(t);var r=o(85893),c=o(67294),a=o(11163),n=o(66308),s=o(68482),l=o(57407),i=o(65858);t.default=(0,i.Q)((function(){const[e,t]=(0,c.useState)([]),[o,i]=(0,c.useState)(!0),[d,u]=(0,c.useState)({show:!1,message:"",type:"success"}),h=(0,a.useRouter)(),m=[{key:"image",label:"Image",render:e=>(0,r.jsx)("img",{src:e.image||"/placeholder.png",alt:e.name,className:"h-12 w-12 object-cover rounded"})},{key:"name",label:"Name",filterable:!0},{key:"category",label:"Category",filterable:!0,render:e=>e.category.name},{key:"price",label:"Price",render:e=>"\u20b9".concat(e.price.toFixed(2))},{key:"stock",label:"Stock",render:e=>(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stock>10?"bg-green-100 text-green-800":e.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.stock>0?"".concat(e.stock," in stock"):"Out of stock"})},{key:"status",label:"Status",filterable:!0,render:e=>(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})},{key:"createdAt",label:"Added",render:e=>new Date(e.createdAt).toLocaleDateString()}];(0,c.useEffect)((()=>{p()}),[]);const p=async()=>{try{const e=await fetch("http://localhost:5000/api/admin/products",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw new Error("Failed to fetch products");const o=await e.json();t(o)}catch(e){console.error("Error fetching products:",e),x("Failed to fetch products","error")}finally{i(!1)}},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";u({show:!0,message:e,type:t})},g=async(e,t)=>{try{if(!(await fetch("http://localhost:5000/api/admin/products/".concat(t,"/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok)throw new Error("Failed to ".concat(e," product"));x("Product ".concat(e,"d successfully")),p()}catch(o){console.error("Error ".concat(e,"ing product:"),o),x("Failed to ".concat(e," product"),"error")}},f=async(e,t)=>{try{if(!(await fetch("http://localhost:5001/api/admin/products/bulk/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({ids:t})})).ok)throw new Error("Failed to ".concat(e," products"));x("Products ".concat(e,"d successfully")),p()}catch(o){console.error("Error ".concat(e,"ing products:"),o),x("Failed to ".concat(e," products"),"error")}},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{const t=await fetch("http://localhost:5001/api/admin/products/export?format=".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.ok)throw new Error("Failed to export products");const o=await t.blob(),r=window.URL.createObjectURL(o),c=document.createElement("a");c.href=r,c.download="products.".concat(e),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(r),document.body.removeChild(c),x("Products exported successfully")}catch(t){console.error("Error exporting products:",t),x("Failed to export products","error")}};return o?(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Products Management"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>h.push("/admin/products/new"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add New Product"}),(0,r.jsxs)("div",{className:"relative inline-block text-left",children:[(0,r.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>document.getElementById("exportMenu").classList.toggle("hidden"),children:["Export",(0,r.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),(0,r.jsx)("div",{id:"exportMenu",className:"hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"export-menu",children:(0,r.jsxs)("div",{className:"py-1",role:"none",children:[(0,r.jsx)("button",{onClick:()=>b("csv"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Export as CSV"}),(0,r.jsx)("button",{onClick:()=>b("excel"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Export as Excel"}),(0,r.jsx)("button",{onClick:()=>b("pdf"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Export as PDF"})]})})]})]})]}),(0,r.jsx)(s.Z,{columns:m,data:e,onRowClick:e=>{h.push("/admin/products/".concat(e.id))},actions:e=>(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),g("active"===e.status?"deactivate":"activate",e.id)},className:"".concat("active"===e.status?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"),children:"active"===e.status?"Deactivate":"Activate"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),g("delete",e.id)},className:"text-red-600 hover:text-red-900",children:"Delete"})]}),bulkActions:[{label:"Activate",action:e=>f("activate",e)},{label:"Deactivate",action:e=>f("deactivate",e)},{label:"Delete",action:e=>f("delete",e)}]}),(0,r.jsx)(l.Z,{show:d.show,message:d.message,type:d.type,onClose:()=>u((e=>({...e,show:!1})))})]})})}))}},function(e){e.O(0,[3424,6920,9881,9774,2888,179],(function(){return t=42678,e(e.s=t);var t}));var t=e.O();_N_E=t}]);