(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5978],{73847:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/consultants/[id]/reviews",function(){return t(29969)}])},35358:function(e,n,t){"use strict";var s=t(85893),i=t(67294),r=t(11163),a=t(41664),c=t.n(a),l=t(34679),o=t(37069),d=t(46063),h=t(36886),x=t(63998),u=t(74775),m=t(72865),j=t(20426),Z=t(78121),p=t(29330),v=t(53165);const f=[{text:"Dashboard",href:"/admin",icon:(0,s.jsx)(l.Z,{})},{text:"Users",href:"/admin/users",icon:(0,s.jsx)(o.Z,{})},{text:"Consultants",href:"/admin/consultants",icon:(0,s.jsx)(d.Z,{})},{text:"Products",href:"/admin/products",icon:(0,s.jsx)(h.Z,{})},{text:"Categories",href:"/admin/categories",icon:(0,s.jsx)(u.Z,{})},{text:"Ailments",href:"/admin/ailments",icon:(0,s.jsx)(m.Z,{})},{text:"Specializations",href:"/admin/specializations",icon:(0,s.jsx)(p.Z,{})},{text:"Orders",href:"/admin/orders",icon:(0,s.jsx)(x.Z,{})},{text:"Reviews",href:"/admin/reviews",icon:(0,s.jsx)(v.Z,{})},{text:"Settings",href:"/admin/settings",icon:(0,s.jsx)(j.Z,{})}];n.Z=function(e){let{children:n}=e;const t=(0,r.useRouter)(),[a,l]=(0,i.useState)(!0);return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsxs)("div",{className:"".concat(a?"w-64":"w-20"," bg-white shadow-lg transition-all duration-300"),children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("h1",{className:"text-xl font-bold ".concat(!a&&"hidden"),children:"Admin Panel"})}),(0,s.jsxs)("nav",{className:"mt-4",children:[f.map((e=>(0,s.jsxs)(c(),{href:e.href,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 ".concat(t.pathname===e.href?"bg-gray-100":""),children:[e.icon,a&&(0,s.jsx)("span",{className:"ml-4",children:e.text})]},e.href))),(0,s.jsxs)("button",{onClick:()=>{t.push("/login")},className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full",children:[(0,s.jsx)(Z.Z,{}),a&&(0,s.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsx)("button",{onClick:()=>l(!a),className:"text-gray-500 hover:text-gray-700",children:a?"\u2190":"\u2192"})})}),(0,s.jsx)("main",{className:"p-6",children:n})]})]})}},29969:function(e,n,t){"use strict";t.r(n);var s=t(85893),i=t(67294),r=t(11163),a=t(76452),c=t(77046),l=t(9258),o=t(32467),d=t(27965),h=t(54937),x=t(78716),u=t(88186),m=t(20095),j=t(3432),Z=t(95288),p=t(95865),v=t(41266),f=t(94881),g=t(61722),w=t(84697),y=t(11395),b=t(80199),N=t(96647),C=t(35358),k=t(97016),_=t(87066),S=t(86866),R=t(21959);const A="https://miet-backend-five.vercel.app";n.default=()=>{var e,n;const t=(0,r.useRouter)(),{id:E}=t.query,{token:P}=(0,k.a)(),[B,O]=(0,i.useState)(null),[z,D]=(0,i.useState)([]),[L,I]=(0,i.useState)(!0),[T,F]=(0,i.useState)(null),[H,U]=(0,i.useState)({open:!1,review:null}),[W,X]=(0,i.useState)({rating:0,comment:""});(0,i.useEffect)((()=>{E&&q()}),[E]);const q=async()=>{try{I(!0);const[e,n]=await Promise.all([_.Z.get("".concat("https://miet-backend-five.vercel.app","/consultants/").concat(E),{headers:{Authorization:"Bearer ".concat(P)}}),_.Z.get("".concat(A,"/api/reviews?consultantId=").concat(E),{headers:{Authorization:"Bearer ".concat(P)}})]);O(e.data),D(n.data),F(null)}catch(e){F("Failed to fetch consultant data"),console.error(e)}finally{I(!1)}};return L?(0,s.jsx)(C.Z,{children:(0,s.jsx)(a.Z,{children:(0,s.jsx)(c.Z,{children:"Loading..."})})}):T?(0,s.jsx)(C.Z,{children:(0,s.jsx)(a.Z,{children:(0,s.jsx)(c.Z,{color:"error",children:T})})}):(0,s.jsx)(C.Z,{children:(0,s.jsxs)(a.Z,{maxWidth:"lg",children:[(0,s.jsxs)(l.Z,{sx:{mb:4},children:[(0,s.jsx)(o.Z,{startIcon:(0,s.jsx)(N.Z,{}),onClick:()=>t.back(),sx:{mb:2},children:"Back to Consultants"}),(0,s.jsxs)(c.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Reviews for ",null===B||void 0===B||null===(e=B.user)||void 0===e?void 0:e.name]}),(0,s.jsxs)(l.Z,{sx:{mb:3},children:[(0,s.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"Overall Rating"}),(0,s.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,s.jsx)(d.Z,{value:(null===B||void 0===B?void 0:B.rating)||0,readOnly:!0,precision:.5}),(0,s.jsxs)(c.Z,{children:[(null===B||void 0===B||null===(n=B.rating)||void 0===n?void 0:n.toFixed(1))||0," (",null===B||void 0===B?void 0:B.totalRatings," reviews)"]})]})]}),(0,s.jsx)(h.Z,{children:(0,s.jsx)(x.Z,{children:(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(m.Z,{children:(0,s.jsxs)(j.Z,{children:[(0,s.jsx)(Z.Z,{children:"User"}),(0,s.jsx)(Z.Z,{children:"Rating"}),(0,s.jsx)(Z.Z,{children:"Comment"}),(0,s.jsx)(Z.Z,{children:"Date"}),(0,s.jsx)(Z.Z,{children:"Actions"})]})}),(0,s.jsx)(p.Z,{children:z.map((e=>(0,s.jsxs)(j.Z,{children:[(0,s.jsx)(Z.Z,{children:e.user.name}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(d.Z,{value:e.rating,readOnly:!0})}),(0,s.jsx)(Z.Z,{children:e.comment}),(0,s.jsx)(Z.Z,{children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(v.Z,{color:"primary",onClick:()=>(e=>{X({rating:e.rating,comment:e.comment||""}),U({open:!0,review:e})})(e),title:"Edit",children:(0,s.jsx)(S.Z,{})}),(0,s.jsx)(v.Z,{color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this review?"))try{await _.Z.delete("".concat(A,"/api/reviews/").concat(e)),q()}catch(n){F(n.message)}})(e.id),title:"Delete",children:(0,s.jsx)(R.Z,{})})]})]},e.id)))})]})})})]}),(0,s.jsxs)(f.Z,{open:H.open,onClose:()=>U({open:!1,review:null}),children:[(0,s.jsx)(g.Z,{children:"Edit Review"}),(0,s.jsxs)(w.Z,{children:[(0,s.jsxs)(l.Z,{sx:{mt:2},children:[(0,s.jsx)(c.Z,{component:"legend",children:"Rating"}),(0,s.jsx)(d.Z,{value:W.rating,onChange:(e,n)=>X({...W,rating:n})})]}),(0,s.jsx)(y.Z,{fullWidth:!0,multiline:!0,rows:4,label:"Comment",value:W.comment,onChange:e=>X({...W,comment:e.target.value}),sx:{mt:2}})]}),(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(o.Z,{onClick:()=>U({open:!1,review:null}),children:"Cancel"}),(0,s.jsx)(o.Z,{onClick:async()=>{try{await _.Z.patch("".concat(A,"/api/reviews/").concat(H.review.id),W),U({open:!1,review:null}),q()}catch(e){F(e.message)}},variant:"contained",color:"primary",children:"Save"})]})]})]})})}},96647:function(e,n,t){"use strict";var s=t(60588),i=t(85893);n.Z=(0,s.Z)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},40679:function(e,n,t){"use strict";const s=(0,t(47531).ZP)();n.Z=s},34286:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var s=t(67081);var i=t(40422);function r({props:e,name:n,defaultTheme:t,themeId:r}){let a=(0,i.Z)(t);return r&&(a=a[r]||a),function(e){const{theme:n,name:t,props:i}=e;return n&&n.components&&n.components[t]&&n.components[t].defaultProps?(0,s.Z)(n.components[t].defaultProps,i):i}({theme:a,name:n,props:e})}}},function(e){e.O(0,[3424,7558,2558,7965,9728,4228,9366,9774,2888,179],(function(){return n=73847,e(e.s=n);var n}));var n=e.O();_N_E=n}]);