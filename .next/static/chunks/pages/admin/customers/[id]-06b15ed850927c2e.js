(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8843],{35714:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/customers/[id]",function(){return t(50749)}])},66308:function(e,s,t){"use strict";t.d(s,{Z:function(){return j}});var r=t(85893),a=t(67294),n=t(11163),o=t(41664),l=t.n(o),i=t(42237),c=t(7543),d=t(18274),m=t(78357),u=t(21809),x=t(50063),h=t(70303),f=t(13658),p=t(45548),g=t(31415),b=t(43407);const y=[{name:"Dashboard",href:"/admin",icon:i.Z},{name:"Users",href:"/admin/users",icon:c.Z},{name:"Products",href:"/admin/products",icon:d.Z},{name:"Consultants",href:"/admin/consultants",icon:m.Z},{name:"Categories",href:"/admin/categories",icon:u.Z},{name:"Ailments",href:"/admin/ailments",icon:x.Z},{name:"Specializations",href:"/admin/specializations",icon:h.Z},{name:"Analytics",href:"/admin/analytics",icon:f.Z},{name:"Settings",href:"/admin/settings",icon:p.Z}];function j(e){let{children:s}=e;const[t,o]=(0,a.useState)(!1),i=(0,n.useRouter)(),c=()=>{localStorage.removeItem("token"),i.push("/admin/login")};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden ".concat(t?"":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>o(!1)}),(0,r.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,r.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>o(!1),children:[(0,r.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,r.jsx)(g.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})}),(0,r.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"})}),(0,r.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:y.map((e=>(0,r.jsxs)(l(),{href:e.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md ".concat(i.pathname===e.href?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(e.icon,{className:"mr-4 h-6 w-6 ".concat(i.pathname===e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"}),e.name]},e.name)))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsx)("button",{onClick:c,className:"flex-shrink-0 w-full group block",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Logout"})})})})})]})]}),(0,r.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"})}),(0,r.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:y.map((e=>(0,r.jsxs)(l(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(i.pathname===e.href?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-6 w-6 ".concat(i.pathname===e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"}),e.name]},e.name)))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsx)("button",{onClick:c,className:"flex-shrink-0 w-full group block",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Logout"})})})})})]})}),(0,r.jsxs)("div",{className:"md:pl-64 flex flex-col flex-1",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-white",children:(0,r.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",onClick:()=>o(!0),children:[(0,r.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,r.jsx)(b.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,r.jsx)("main",{className:"flex-1",children:s})]})]})}},57407:function(e,s,t){"use strict";t.d(s,{Z:function(){return m}});var r=t(85893),a=t(67294),n=t(84463),o=t(10050),l=t(5362),i=t(36947),c=t(82313),d=t(31415);function m(e){let{show:s,message:t,type:m="success",onClose:u}=e;const x={success:"bg-green-50 text-green-800",error:"bg-red-50 text-red-800",warning:"bg-yellow-50 text-yellow-800",info:"bg-blue-50 text-blue-800"},h={success:o.Z,error:l.Z,warning:i.Z,info:c.Z}[m]||o.Z;return(0,r.jsx)("div",{"aria-live":"assertive",className:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-50",children:(0,r.jsx)("div",{className:"w-full flex flex-col items-center space-y-4 sm:items-end",children:(0,r.jsx)(n.u,{show:s,as:a.Fragment,enter:"transform ease-out duration-300 transition",enterFrom:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterTo:"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"max-w-sm w-full ".concat(x[m]," shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"),children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(h,{className:"h-6 w-6","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:t})}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,r.jsxs)("button",{type:"button",className:"".concat(x[m]," rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),onClick:u,children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(d.Z,{className:"h-5 w-5","aria-hidden":"true"})]})})]})})})})})})}},65858:function(e,s,t){"use strict";t.d(s,{Q:function(){return o}});var r=t(85893),a=t(67294),n=t(11163);function o(e){return function(s){const t=(0,n.useRouter)();return(0,a.useEffect)((()=>{localStorage.getItem("token")||t.push("/admin/login")}),[t]),(0,r.jsx)(e,{...s})}}},50749:function(e,s,t){"use strict";t.r(s);var r=t(85893),a=t(67294),n=t(11163),o=t(82175),l=t(16310),i=t(66308),c=t(57407),d=t(65858);const m=l.Ry({name:l.Z_().required("Name is required"),email:l.Z_().email("Invalid email").required("Email is required"),phone:l.Z_().required("Phone is required"),address:l.Z_(),city:l.Z_(),state:l.Z_(),country:l.Z_(),postalCode:l.Z_(),status:l.Z_().oneOf(["active","inactive"]).required("Status is required"),avatar:l.nK()});s.default=(0,d.Q)((function(){const e=(0,n.useRouter)(),{id:s}=e.query,t=Boolean(s),[l,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[p,g]=(0,a.useState)({show:!1,message:"",type:"success"}),b=(0,o.TA)({initialValues:{name:"",email:"",phone:"",address:"",city:"",state:"",country:"",postalCode:"",status:"active",avatar:null},validationSchema:m,onSubmit:async function(r){x(!0);try{const a=new FormData;Object.keys(r).forEach((e=>{null!==r[e]&&""!==r[e]&&a.append(e,r[e])}));if(!(await fetch("http://localhost:5001/api/admin/customers".concat(t?"/".concat(s):""),{method:t?"PUT":"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a})).ok)throw new Error("Failed to ".concat(t?"update":"create"," customer"));j("Customer ".concat(t?"updated":"created"," successfully")),e.push("/admin/customers")}catch(a){console.error("Error ".concat(t?"updating":"creating"," customer:"),a),j("Failed to ".concat(t?"update":"create"," customer"),"error")}finally{x(!1)}}});(0,a.useEffect)((()=>{t?y():d(!1)}),[t,s]);const y=async()=>{try{const e=await fetch("http://localhost:5001/api/admin/customers/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw new Error("Failed to fetch customer");const t=await e.json();b.setValues({name:t.name,email:t.email,phone:t.phone,address:t.address||"",city:t.city||"",state:t.state||"",country:t.country||"",postalCode:t.postalCode||"",status:t.status,avatar:null}),f(t.avatar)}catch(e){console.error("Error fetching customer:",e),j("Failed to fetch customer","error")}finally{d(!1)}},j=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";g({show:!0,message:e,type:s})};return l?(0,r.jsx)(i.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:t?"Edit Customer":"Add New Customer"}),(0,r.jsxs)("form",{onSubmit:b.handleSubmit,className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",...b.getFieldProps("name"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),b.touched.name&&b.errors.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.errors.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",...b.getFieldProps("email"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),b.touched.email&&b.errors.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.errors.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,r.jsx)("input",{type:"tel",id:"phone",...b.getFieldProps("phone"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),b.touched.phone&&b.errors.phone&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.errors.phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,r.jsxs)("select",{id:"status",...b.getFieldProps("status"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]}),b.touched.status&&b.errors.status&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.errors.status})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,r.jsx)("input",{type:"text",id:"address",...b.getFieldProps("address"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,r.jsx)("input",{type:"text",id:"city",...b.getFieldProps("city"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"State"}),(0,r.jsx)("input",{type:"text",id:"state",...b.getFieldProps("state"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,r.jsx)("input",{type:"text",id:"country",...b.getFieldProps("country"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,r.jsx)("input",{type:"text",id:"postalCode",...b.getFieldProps("postalCode"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Profile Image"}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-32 w-32 flex-shrink-0",children:(0,r.jsx)("img",{src:h||"/placeholder.png",alt:"Customer",className:"h-32 w-32 object-cover rounded-lg"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){b.setFieldValue("avatar",s);const e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(s)}},className:"hidden"}),"Change Image"]}),b.touched.avatar&&b.errors.avatar&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.errors.avatar})]})]})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/admin/customers"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Customer"})]})]})]}),(0,r.jsx)(c.Z,{show:p.show,message:p.message,type:p.type,onClose:()=>g((e=>({...e,show:!1})))})]})})}))}},function(e){e.O(0,[3424,6920,7023,9774,2888,179],(function(){return s=35714,e(e.s=s);var s}));var s=e.O();_N_E=s}]);