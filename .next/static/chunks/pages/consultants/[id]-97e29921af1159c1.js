(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7519],{57926:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consultants/[id]",function(){return a(83940)}])},83940:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(85893),n=a(67294),l=a(11163),r=a(84644),c=a(39044);const i="https://miet-backend-five.vercel.app";function d(){const e=(0,l.useRouter)(),{id:s}=e.query,[a,d]=(0,n.useState)(null),[o,x]=(0,n.useState)(!0),[m,h]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1);(0,n.useEffect)((()=>{s&&(g(),j())}),[s]);const g=async()=>{try{x(!0);const e=await fetch("".concat(i,"/api/consultants/").concat(s));if(!e.ok)throw new Error("Failed to fetch consultant details");const a=await e.json();d(a),h(null)}catch(e){h(e.message),console.error("Error fetching consultant:",e)}finally{x(!1)}},j=async()=>{try{const e=await fetch("".concat(i,"/api/auth/me"));if(e.ok){const s=await e.json();u("admin"===s.role)}}catch(e){console.error("Error checking admin status:",e)}};if(o)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8 text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading consultant details..."})]}),(0,t.jsx)(c.Z,{})]});if(m)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8 text-center",children:[(0,t.jsx)("p",{className:"text-red-600",children:m}),(0,t.jsx)("button",{onClick:g,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition",children:"Retry"})]}),(0,t.jsx)(c.Z,{})]});if(!a)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)("div",{className:"max-w-5xl mx-auto px-4 py-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Consultant not found"})}),(0,t.jsx)(c.Z,{})]});const{user:f,bio:b,categories:N,ailments:v,services:w,rating:y,totalRatings:k,documents:_}=a,E=k>0?(y/k).toFixed(1):"New";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:(0,t.jsx)("div",{className:"flex flex-col md:flex-row gap-8",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:f.name}),p&&!a.approved&&(0,t.jsx)("button",{onClick:async()=>{try{if(!(await fetch("".concat(i,"/api/consultants/").concat(s,"/approve"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok)throw new Error("Failed to approve consultant");await g(),alert("Consultant approved successfully")}catch(e){alert(e.message),console.error("Error approving consultant:",e)}},className:"px-4 py-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition",children:"Approve Consultant"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-yellow-400 text-xl",children:"\u2605"}),(0,t.jsx)("span",{className:"ml-1 text-gray-600",children:E}),k>0&&(0,t.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(",k," reviews)"]})]}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(a.approved?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:a.approved?"Approved":"Pending Approval"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-lg mb-6",children:b})]})})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Specializations"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map((e=>(0,t.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:e.name},e.id)))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Areas of Expertise"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map((e=>(0,t.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full",children:e.name},e.id)))})]})]}),w&&w.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Services Offered"}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:w.map((e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-blue-600 font-semibold",children:["\u20b9",e.price]}),e.duration&&(0,t.jsxs)("span",{className:"text-gray-500",children:[e.duration," mins"]})]})]},e.id)))})]}),_&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Certifications & Documents"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-4",children:_.split(",").map(((e,s)=>(0,t.jsxs)("a",{href:"".concat(i,"/uploads/consultant_docs/").concat(e),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Document ",s+1]},s)))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Email:"})," ",f.email]}),f.phone&&(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Phone:"})," ",f.phone]})]}),f.address&&(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Address:"})," ",f.address]})})]})]})]}),(0,t.jsx)(c.Z,{})]})}}},function(e){e.O(0,[3424,5647,9774,2888,179],(function(){return s=57926,e(e.s=s);var s}));var s=e.O();_N_E=s}]);